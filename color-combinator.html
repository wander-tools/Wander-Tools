<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Combinator - Wander Tools</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #f0f0f0;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            width: 100%;
        }
        
        .back-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-weight: 500;
        }
        
        .dark-mode .back-button {
            background: rgba(255, 255, 255, 0.1);
            color: #f0f0f0;
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .dark-mode .back-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .dark-mode-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        
        .dark-mode .dark-mode-toggle {
            background: rgba(255, 255, 255, 0.1);
            color: #f0f0f0;
        }
        
        .dark-mode-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            color: white;
        }
        
        .dark-mode header {
            color: #f0f0f0;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        header p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
        }
        
        .tool-container {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            margin-bottom: 30px;
            transition: background-color 0.3s;
        }
        
        .dark-mode .tool-container {
            background-color: #1e293b;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }
        
        .tool-header {
            background: linear-gradient(90deg, #4776E6 0%, #8E54E9 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .tool-header h2 {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .color-combinator {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .combinator-types {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .combinator-btn {
            padding: 10px 20px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .dark-mode .combinator-btn {
            background: #334155;
            border-color: #475569;
            color: #f0f0f0;
        }
        
        .combinator-btn.active {
            background: #4776E6;
            color: white;
            border-color: #4776E6;
        }
        
        .dark-mode .combinator-btn.active {
            background: #8E54E9;
            border-color: #8E54E9;
        }
        
        .combinator-btn:hover {
            background: #e9ecef;
        }
        
        .dark-mode .combinator-btn:hover {
            background: #475569;
        }
        
        .combinator-btn.active:hover {
            background: #3b5fc9;
        }
        
        .dark-mode .combinator-btn.active:hover {
            background: #7c3aed;
        }
        
        .color-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .color-picker-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .color-picker-label {
            font-weight: 600;
            color: #4776E6;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .dark-mode .color-picker-label {
            color: #8E54E9;
        }
        
        .color-input-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .color-picker {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: none;
        }
        
        .color-value-input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s, background-color 0.3s, color 0.3s;
            font-family: monospace;
        }
        
        .dark-mode .color-value-input {
            border-color: #475569;
            background-color: #334155;
            color: #f0f0f0;
        }
        
        .color-value-input:focus {
            border-color: #4776E6;
        }
        
        .dark-mode .color-value-input:focus {
            border-color: #8E54E9;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 10px 0;
        }
        
        @media (max-width: 480px) {
            .action-buttons {
                grid-template-columns: 1fr;
            }
        }
        
        .generate-btn {
            padding: 15px;
            background: linear-gradient(90deg, #4776E6 0%, #8E54E9 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .generate-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .reset-btn {
            padding: 15px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .reset-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            background: #ff5252;
        }
        
        .results-container {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-top: 10px;
            transition: background-color 0.3s, border-color 0.3s;
        }
        
        .dark-mode .results-container {
            background: #334155;
            border-color: #475569;
        }
        
        .results-container h3 {
            color: #4776E6;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: color 0.3s;
        }
        
        .dark-mode .results-container h3 {
            color: #8E54E9;
        }
        
        .color-palette {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .palette-color {
            height: 100px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 10px;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .palette-color:hover {
            transform: translateY(-5px);
        }
        
        .color-info {
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 5px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 600;
            text-align: center;
            backdrop-filter: blur(5px);
        }
        
        .color-actions {
            display: flex;
            justify-content: flex-end;
            gap: 5px;
        }
        
        .color-action-btn {
            background: rgba(255, 255, 255, 0.3);
            border: none;
            border-radius: 3px;
            color: white;
            cursor: pointer;
            padding: 3px 6px;
            font-size: 0.7rem;
            transition: background 0.3s;
        }
        
        .color-action-btn:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        
        .scheme-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .scheme-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .scheme-visual {
            height: 40px;
            border-radius: 8px;
            display: flex;
            overflow: hidden;
        }
        
        .scheme-color {
            flex: 1;
        }
        
        .scheme-label {
            font-weight: 600;
            color: #4776E6;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .dark-mode .scheme-label {
            color: #8E54E9;
        }
        
        .action-buttons-bottom {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 10px 15px;
            background: #4776E6;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .action-btn:hover {
            background: #3b5fc9;
        }
        
        .error-message {
            padding: 12px;
            background: #fff5f5;
            border: 2px solid #ff6b6b;
            border-radius: 8px;
            color: #c92a2a;
            margin-top: 10px;
            display: none;
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }
        
        .dark-mode .error-message {
            background: #2b1d1d;
            border-color: #ff6b6b;
            color: #ffa8a8;
        }
        
        .error-message.visible {
            display: block;
        }
        
        .instructions {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 20px;
            margin-bottom: 30px;
            transition: background-color 0.3s;
        }
        
        .dark-mode .instructions {
            background-color: #1e293b;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }
        
        .instructions h3 {
            color: #4776E6;
            margin-bottom: 15px;
            font-size: 1.5rem;
            transition: color 0.3s;
        }
        
        .dark-mode .instructions h3 {
            color: #8E54E9;
        }
        
        .instructions ul {
            list-style-type: none;
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .instructions li:before {
            content: "•";
            color: #4776E6;
            font-weight: bold;
            position: absolute;
            left: 0;
            transition: color 0.3s;
        }
        
        .dark-mode .instructions li:before {
            color: #8E54E9;
        }
        
        footer {
            text-align: center;
            color: white;
            margin-top: auto;
            padding: 20px;
            opacity: 0.8;
        }
        
        .dark-mode footer {
            color: #cbd5e1;
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 20px;
            background: #4caf50;
            color: white;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 1000;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s, transform 0.3s;
        }
        
        .toast.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .color-selection {
                grid-template-columns: 1fr;
            }
            
            .color-palette {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .scheme-preview {
                grid-template-columns: 1fr;
            }
            
            .action-buttons-bottom {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-container">
            <a href="index.html" class="back-button">
                <i class="fas fa-arrow-left"></i> Back to Tools
            </a>
            <button class="dark-mode-toggle" id="darkModeToggle">
                <i class="fas fa-moon"></i>
            </button>
        </div>
        
        <header>
            <h1>Color Combinator</h1>
            <p>Create beautiful color combinations and palettes for your design projects</p>
        </header>
        
        <div class="tool-container">
            <div class="tool-header">
                <h2><i class="fas fa-palette"></i> Color Combinator</h2>
                <div class="tool-actions">
                    <i class="fas fa-expand"></i>
                </div>
            </div>
            
            <div class="color-combinator">
                <div class="combinator-types">
                    <button class="combinator-btn active" data-type="complementary">
                        <i class="fas fa-exchange-alt"></i> Complementary
                    </button>
                    <button class="combinator-btn" data-type="analogous">
                        <i class="fas fa-bars"></i> Analogous
                    </button>
                    <button class="combinator-btn" data-type="triadic">
                        <i class="fas fa-play"></i> Triadic
                    </button>
                    <button class="combinator-btn" data-type="tetradic">
                        <i class="fas fa-square"></i> Tetradic
                    </button>
                    <button class="combinator-btn" data-type="monochromatic">
                        <i class="fas fa-layer-group"></i> Monochromatic
                    </button>
                </div>
                
                <div class="color-selection">
                    <div class="color-picker-group">
                        <label class="color-picker-label">
                            <i class="fas fa-paint-brush"></i> Base Color
                        </label>
                        <div class="color-input-container">
                            <input type="color" id="baseColorPicker" class="color-picker" value="#6a11cb">
                            <input type="text" id="baseColorInput" class="color-value-input" placeholder="#6A11CB" value="#6A11CB">
                        </div>
                    </div>
                    
                    <div class="color-picker-group">
                        <label class="color-picker-label">
                            <i class="fas fa-paint-brush"></i> Secondary Color (Optional)
                        </label>
                        <div class="color-input-container">
                            <input type="color" id="secondaryColorPicker" class="color-picker" value="#2575fc">
                            <input type="text" id="secondaryColorInput" class="color-value-input" placeholder="#2575FC" value="#2575FC">
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="generate-btn" id="generateBtn">
                        <i class="fas fa-magic"></i> Generate Colors
                    </button>
                    <button class="reset-btn" id="resetBtn">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                </div>
                
                <div class="results-container">
                    <h3>
                        <span>Generated Color Palette</span>
                        <span class="stat-value" id="paletteName">Complementary Palette</span>
                    </h3>
                    
                    <div class="color-palette" id="colorPalette">
                        <!-- Color palette will be generated here -->
                    </div>
                    
                    <h3>
                        <span>Color Scheme Preview</span>
                    </h3>
                    
                    <div class="scheme-preview" id="schemePreview">
                        <!-- Scheme preview will be generated here -->
                    </div>
                    
                    <div class="action-buttons-bottom">
                        <button class="action-btn" id="copyPaletteBtn">
                            <i class="fas fa-copy"></i> Copy Palette
                        </button>
                        <button class="action-btn" id="exportPaletteBtn">
                            <i class="fas fa-download"></i> Export as PNG
                        </button>
                        <button class="action-btn" id="randomPaletteBtn">
                            <i class="fas fa-dice"></i> Random Palette
                        </button>
                    </div>
                </div>
                
                <div class="error-message" id="errorMessage">
                    <strong><i class="fas fa-exclamation-circle"></i> Error:</strong>
                    <span id="errorText"></span>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h3>How to Use the Color Combinator</h3>
            <ul>
                <li>Select a base color using the color picker or enter a color code</li>
                <li>Optionally select a secondary color for some color schemes</li>
                <li>Choose a color scheme type from the options</li>
                <li>Click "Generate Colors" to create your color palette</li>
                <li>Copy individual color codes by clicking on them</li>
                <li>Use the "Copy Palette" button to copy all color codes</li>
                <li>Export your palette as a PNG image for your projects</li>
                <li>Generate random color palettes for inspiration</li>
                <li>Use the "Reset" button to clear your selections</li>
                <li>Toggle between dark and light mode using the moon/sun button</li>
            </ul>
            
            <h3>Color Schemes Explained</h3>
            <ul>
                <li><strong>Complementary</strong>: Colors opposite each other on the color wheel</li>
                <li><strong>Analogous</strong>: Colors next to each other on the color wheel</li>
                <li><strong>Triadic</strong>: Three colors evenly spaced on the color wheel</li>
                <li><strong>Tetradic</strong>: Four colors arranged into two complementary pairs</li>
                <li><strong>Monochromatic</strong>: Variations in lightness and saturation of a single hue</li>
            </ul>
            
            <h3>Usage Tips</h3>
            <ul>
                <li>Use complementary colors for high contrast and vibrant designs</li>
                <li>Analogous colors create harmonious and comfortable designs</li>
                <li>Triadic schemes offer strong visual contrast while retaining harmony</li>
                <li>Tetradic schemes work best if you let one color dominate</li>
                <li>Monochromatic schemes create a cohesive and elegant look</li>
            </ul>
        </div>
    </div>
    
    <footer>
        <p>© 2023 Wander Tools | All Rights Reserved</p>
    </footer>

    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Color copied to clipboard!</span>
    </div>

    <script>
        // DOM Elements
        const baseColorPicker = document.getElementById('baseColorPicker');
        const baseColorInput = document.getElementById('baseColorInput');
        const secondaryColorPicker = document.getElementById('secondaryColorPicker');
        const secondaryColorInput = document.getElementById('secondaryColorInput');
        const generateBtn = document.getElementById('generateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const copyPaletteBtn = document.getElementById('copyPaletteBtn');
        const exportPaletteBtn = document.getElementById('exportPaletteBtn');
        const randomPaletteBtn = document.getElementById('randomPaletteBtn');
        const colorPalette = document.getElementById('colorPalette');
        const schemePreview = document.getElementById('schemePreview');
        const paletteName = document.getElementById('paletteName');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const combinatorBtns = document.querySelectorAll('.combinator-btn');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');
        
        // Current state
        let currentSchemeType = 'complementary';
        let currentColors = [];
        
        // Initialize the Color Combinator
        function initColorCombinator() {
            // Set up event listeners
            generateBtn.addEventListener('click', generateColors);
            resetBtn.addEventListener('click', resetCombinator);
            darkModeToggle.addEventListener('click', toggleDarkMode);
            copyPaletteBtn.addEventListener('click', copyPalette);
            exportPaletteBtn.addEventListener('click', exportPalette);
            randomPaletteBtn.addEventListener('click', generateRandomPalette);
            
            // Color picker and input synchronization
            baseColorPicker.addEventListener('input', () => {
                baseColorInput.value = baseColorPicker.value.toUpperCase();
            });
            
            baseColorInput.addEventListener('input', () => {
                if (/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(baseColorInput.value)) {
                    baseColorPicker.value = baseColorInput.value;
                }
            });
            
            secondaryColorPicker.addEventListener('input', () => {
                secondaryColorInput.value = secondaryColorPicker.value.toUpperCase();
            });
            
            secondaryColorInput.addEventListener('input', () => {
                if (/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(secondaryColorInput.value)) {
                    secondaryColorPicker.value = secondaryColorInput.value;
                }
            });
            
            // Scheme type buttons
            combinatorBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    combinatorBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentSchemeType = btn.getAttribute('data-type');
                    updatePaletteName();
                });
            });
            
            // Check for saved dark mode preference
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
                darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            // Initial generation
            generateColors();
        }
        
        // Toggle dark mode
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
                darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                localStorage.setItem('darkMode', 'disabled');
                darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        }
        
        // Update palette name based on selected type
        function updatePaletteName() {
            const names = {
                'complementary': 'Complementary Palette',
                'analogous': 'Analogous Palette',
                'triadic': 'Triadic Palette',
                'tetradic': 'Tetradic Palette',
                'monochromatic': 'Monochromatic Palette'
            };
            
            paletteName.textContent = names[currentSchemeType] || 'Color Palette';
        }
        
        // Generate colors based on selected scheme
        function generateColors() {
            try {
                hideError();
                
                const baseColor = baseColorPicker.value;
                const secondaryColor = secondaryColorPicker.value;
                
                if (!baseColor) {
                    showError('Please select a base color');
                    return;
                }
                
                // Convert base color to RGB
                const baseRgb = hexToRgb(baseColor);
                
                // Generate colors based on scheme type
                switch(currentSchemeType) {
                    case 'complementary':
                        currentColors = generateComplementaryColors(baseRgb);
                        break;
                    case 'analogous':
                        currentColors = generateAnalogousColors(baseRgb);
                        break;
                    case 'triadic':
                        currentColors = generateTriadicColors(baseRgb);
                        break;
                    case 'tetradic':
                        currentColors = generateTetradicColors(baseRgb);
                        break;
                    case 'monochromatic':
                        currentColors = generateMonochromaticColors(baseRgb);
                        break;
                }
                
                // Update UI
                updateColorPalette();
                updateSchemePreview();
                
            } catch (error) {
                showError('Error generating colors: ' + error.message);
            }
        }
        
        // Generate complementary colors
        function generateComplementaryColors(baseRgb) {
            const colors = [rgbToHex(baseRgb.r, baseRgb.g, baseRgb.b)];
            
            // Calculate complementary color (rotate hue by 180°)
            const compHsl = rgbToHslValues(baseRgb.r, baseRgb.g, baseRgb.b);
            compHsl.h = (compHsl.h + 180) % 360;
            const compHex = hslToHex(compHsl.h, compHsl.s, compHsl.l);
            
            colors.push(compHex);
            
            // Add variations
            colors.push(hslToHex(compHsl.h, compHsl.s, Math.min(compHsl.l + 20, 100)));
            colors.push(hslToHex(compHsl.h, compHsl.s, Math.max(compHsl.l - 20, 0)));
            colors.push(hslToHex(compHsl.h, Math.min(compHsl.s + 20, 100), compHsl.l));
            
            return colors;
        }
        
        // Generate analogous colors
        function generateAnalogousColors(baseRgb) {
            const baseHsl = rgbToHslValues(baseRgb.r, baseRgb.g, baseRgb.b);
            const colors = [];
            
            // Generate 5 analogous colors (30° increments)
            for (let i = -2; i <= 2; i++) {
                const hue = (baseHsl.h + i * 30 + 360) % 360;
                colors.push(hslToHex(hue, baseHsl.s, baseHsl.l));
            }
            
            return colors;
        }
        
        // Generate triadic colors
        function generateTriadicColors(baseRgb) {
            const baseHsl = rgbToHslValues(baseRgb.r, baseRgb.g, baseRgb.b);
            const colors = [rgbToHex(baseRgb.r, baseRgb.g, baseRgb.b)];
            
            // Calculate triadic colors (120° increments)
            const triad1Hue = (baseHsl.h + 120) % 360;
            const triad2Hue = (baseHsl.h + 240) % 360;
            
            colors.push(hslToHex(triad1Hue, baseHsl.s, baseHsl.l));
            colors.push(hslToHex(triad2Hue, baseHsl.s, baseHsl.l));
            
            // Add variations
            colors.push(hslToHex(triad1Hue, Math.min(baseHsl.s + 20, 100), baseHsl.l));
            colors.push(hslToHex(triad2Hue, baseHsl.s, Math.min(baseHsl.l + 20, 100)));
            
            return colors;
        }
        
        // Generate tetradic colors
        function generateTetradicColors(baseRgb) {
            const baseHsl = rgbToHslValues(baseRgb.r, baseRgb.g, baseRgb.b);
            const colors = [rgbToHex(baseRgb.r, baseRgb.g, baseRgb.b)];
            
            // Calculate tetradic colors (90° increments)
            for (let i = 1; i <= 3; i++) {
                const hue = (baseHsl.h + i * 90) % 360;
                colors.push(hslToHex(hue, baseHsl.s, baseHsl.l));
            }
            
            // Add a lighter variation
            colors.push(hslToHex(baseHsl.h, baseHsl.s, Math.min(baseHsl.l + 30, 100)));
            
            return colors;
        }
        
        // Generate monochromatic colors
        function generateMonochromaticColors(baseRgb) {
            const baseHsl = rgbToHslValues(baseRgb.r, baseRgb.g, baseRgb.b);
            const colors = [];
            
            // Generate 5 monochromatic colors with varying lightness
            for (let i = 0; i < 5; i++) {
                const lightness = 10 + i * 20;
                colors.push(hslToHex(baseHsl.h, baseHsl.s, lightness));
            }
            
            return colors;
        }
        
        // Update color palette display
        function updateColorPalette() {
            // Clear previous palette
            colorPalette.innerHTML = '';
            
            // Add colors to palette
            currentColors.forEach(color => {
                const colorElement = document.createElement('div');
                colorElement.className = 'palette-color';
                colorElement.style.backgroundColor = color;
                colorElement.innerHTML = `
                    <div class="color-actions">
                        <button class="color-action-btn copy-color-btn" title="Copy ${color}">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <div class="color-info">${color}</div>
                `;
                
                // Add copy functionality
                const copyBtn = colorElement.querySelector('.copy-color-btn');
                copyBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    copyToClipboard(color, 'Color');
                });
                
                // Add click to select functionality
                colorElement.addEventListener('click', () => {
                    baseColorPicker.value = color;
                    baseColorInput.value = color;
                    generateColors();
                });
                
                colorPalette.appendChild(colorElement);
            });
        }
        
        // Update scheme preview
        function updateSchemePreview() {
            // Clear previous preview
            schemePreview.innerHTML = '';
            
            // Create preview items for different use cases
            const previews = [
                { title: 'Website Header', colors: [currentColors[0], currentColors[1], currentColors[2]] },
                { title: 'Chart Colors', colors: currentColors.slice(0, 5) },
                { title: 'Gradient Background', colors: [currentColors[0], currentColors[1]] },
                { title: 'Button Styles', colors: [currentColors[0], currentColors[3], currentColors[4]] }
            ];
            
            // Add preview items
            previews.forEach(preview => {
                const previewElement = document.createElement('div');
                previewElement.className = 'scheme-item';
                
                let visualHtml = '<div class="scheme-visual">';
                preview.colors.forEach(color => {
                    visualHtml += `<div class="scheme-color" style="background-color: ${color};"></div>`;
                });
                visualHtml += '</div>';
                
                previewElement.innerHTML = `
                    ${visualHtml}
                    <div class="scheme-label">
                        <i class="fas fa-paint-roller"></i> ${preview.title}
                    </div>
                `;
                
                schemePreview.appendChild(previewElement);
            });
        }
        
        // Generate random palette
        function generateRandomPalette() {
            // Generate random hex color
            const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16).toUpperCase();
            
            // Update base color
            baseColorPicker.value = randomColor;
            baseColorInput.value = randomColor;
            
            // Also randomize scheme type
            const schemeTypes = ['complementary', 'analogous', 'triadic', 'tetradic', 'monochromatic'];
            const randomScheme = schemeTypes[Math.floor(Math.random() * schemeTypes.length)];
            
            // Update active button
            combinatorBtns.forEach(b => b.classList.remove('active'));
            document.querySelector(`[data-type="${randomScheme}"]`).classList.add('active');
            currentSchemeType = randomScheme;
            
            updatePaletteName();
            generateColors();
        }
        
        // Reset combinator
        function resetCombinator() {
            baseColorPicker.value = '#6a11cb';
            baseColorInput.value = '#6A11CB';
            secondaryColorPicker.value = '#2575fc';
            secondaryColorInput.value = '#2575FC';
            
            combinatorBtns.forEach(b => b.classList.remove('active'));
            document.querySelector('[data-type="complementary"]').classList.add('active');
            currentSchemeType = 'complementary';
            
            updatePaletteName();
            generateColors();
            hideError();
        }
        
        // Copy palette to clipboard
        function copyPalette() {
            const paletteText = currentColors.map(color => color).join('\n');
            copyToClipboard(paletteText, 'Color palette');
        }
        
        // Export palette as PNG
        function exportPalette() {
            showToast('Export feature will be implemented soon!');
        }
        
        // Copy to clipboard with fallback
        async function copyToClipboard(text, format) {
            try {
                // Try using the modern Clipboard API first
                if (navigator.clipboard && window.isSecureContext) {
                    await navigator.clipboard.writeText(text);
                    showToast(`${format} copied to clipboard!`);
                    return;
                }
                
                // Fallback for older browsers or insecure contexts
                const textArea = document.createElement('textarea');
                textArea.value = text;
                
                // Make the textarea out of viewport
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                document.body.appendChild(textArea);
                
                // Select and copy
                textArea.focus();
                textArea.select();
                
                let successful = false;
                try {
                    successful = document.execCommand('copy');
                } catch (err) {
                    console.error('Fallback copy failed:', err);
                }
                
                document.body.removeChild(textArea);
                
                if (successful) {
                    showToast(`${format} copied to clipboard!`);
                } else {
                    showError('Failed to copy. Please manually select and copy the text.');
                    // Automatically select the text for manual copying
                    const tempInput = document.createElement('input');
                    tempInput.value = text;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    document.body.removeChild(tempInput);
                }
            } catch (err) {
                console.error('Copy failed:', err);
                showError('Failed to copy: ' + err.message);
                
                // Fallback: Create a temporary input element and select the text
                const tempInput = document.createElement('input');
                tempInput.value = text;
                document.body.appendChild(tempInput);
                tempInput.select();
                
                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        showToast(`${format} copied to clipboard!`);
                    } else {
                        showError('Please manually copy the text: ' + text);
                    }
                } catch (fallbackErr) {
                    showError('Please manually copy the text: ' + text);
                }
                
                document.body.removeChild(tempInput);
            }
        }
        
        // Show error message
        function showError(message) {
            errorText.textContent = message;
            errorMessage.classList.add('visible');
        }
        
        // Hide error message
        function hideError() {
            errorMessage.classList.remove('visible');
        }
        
        // Show toast message
        function showToast(message) {
            toastMessage.textContent = message;
            toast.classList.add('visible');
            
            setTimeout(() => {
                toast.classList.remove('visible');
            }, 3000);
        }
        
        // Utility functions
        function hexToRgb(hex) {
            hex = hex.replace('#', '');
            
            if (hex.length === 3) {
                hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
            }
            
            const r = parseInt(hex.substring(0, 2), 16);
            const g = parseInt(hex.substring(2, 4), 16);
            const b = parseInt(hex.substring(4, 6), 16);
            
            return { r, g, b };
        }
        
        function rgbToHex(r, g, b) {
            return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
        }
        
        function rgbToHslValues(r, g, b) {
            r /= 255;
            g /= 255;
            b /= 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            
            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                
                h /= 6;
            }
            
            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }
        
        function hslToHex(h, s, l) {
            h /= 360;
            s /= 100;
            l /= 100;
            
            let r, g, b;
            
            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            
            return rgbToHex(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255));
        }
        
        // Initialize the Color Combinator when the page loads
        window.onload = initColorCombinator;
    </script>
</body>
</html>
