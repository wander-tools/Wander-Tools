<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wander Tools - URL Shortener</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    :root {
        --primary-color: #4361ee;
        --secondary-color: #3f37c9;
        --accent-color: #4895ef;
        --light-color: #f8f9fa;
        --dark-color: #212529;
        --gray-color: #6c757d;
        --success-color: #4bb543;
        --border-radius: 8px;
        --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        --transition: all 0.3s ease;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
        background-color: #f5f7ff;
        color: #333;
        line-height: 1.6;
        padding: 20px;
        min-height: 100vh;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }

    .header {
        text-align: center;
        margin-bottom: 30px;
    }

    .header h1 {
        font-size: 2.5rem;
        color: var(--primary-color);
        margin-bottom: 10px;
    }

    .header p {
        color: var(--gray-color);
        font-size: 1.1rem;
    }

    .card {
        background-color: white;
        border-radius: var(--border-radius);
        padding: 25px;
        box-shadow: var(--box-shadow);
        margin-bottom: 30px;
    }

    .card h2 {
        color: var(--primary-color);
        margin-bottom: 20px;
        font-size: 1.5rem;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: var(--dark-color);
    }

    .form-control {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: var(--border-radius);
        font-size: 1rem;
        transition: var(--transition);
    }

    .form-control:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
    }

    .divider {
        height: 1px;
        background-color: #e9ecef;
        margin: 25px 0;
    }

    .result-card {
        background-color: rgba(67, 97, 238, 0.05);
        border-left: 4px solid var(--primary-color);
    }

    .result-card h3 {
        color: var(--primary-color);
        margin-bottom: 15px;
    }

    .short-url {
        font-size: 1.2rem;
        font-weight: 500;
        color: var(--primary-color);
        word-break: break-all;
        margin-bottom: 15px;
        padding: 10px;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 4px;
    }

    .action-buttons {
        display: flex;
        gap: 15px;
        margin-top: 20px;
    }

    button {
        padding: 12px 20px;
        border: none;
        border-radius: var(--border-radius);
        cursor: pointer;
        font-weight: 500;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .btn-primary {
        background-color: var(--primary-color);
        color: white;
    }

    .btn-primary:hover {
        background-color: var(--secondary-color);
    }

    .btn-secondary {
        background-color: var(--gray-color);
        color: white;
    }

    .btn-secondary:hover {
        background-color: #5a6268;
    }

    .btn-success {
        background-color: var(--success-color);
        color: white;
    }

    .btn-success:hover {
        background-color: #3d9436;
    }

    .recent-urls {
        margin-top: 30px;
    }

    .recent-urls h3 {
        color: var(--primary-color);
        margin-bottom: 20px;
        font-size: 1.5rem;
    }

    .url-list {
        list-style: none;
    }

    .url-item {
        padding: 15px;
        border-bottom: 1px solid #e9ecef;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .url-item:last-child {
        border-bottom: none;
    }

    .original-url {
        color: var(--gray-color);
        font-size: 0.9rem;
        word-break: break-all;
        margin-right: 15px;
    }

    .shortened-url {
        color: var(--primary-color);
        font-weight: 500;
        word-break: break-all;
    }

    .footer {
        text-align: center;
        margin-top: 50px;
        padding-top: 20px;
        border-top: 1px solid #e9ecef;
        color: var(--gray-color);
    }

    .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        background-color: var(--success-color);
        color: white;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        transform: translateX(100%);
        transition: transform 0.3s ease;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .notification.error {
        background-color: #ff3333;
    }

    .notification.show {
        transform: translateX(0);
    }

    .drop-area {
        padding: 20px;
        border: 2px dashed var(--primary-color);
        border-radius: var(--border-radius);
        margin-bottom: 15px;
        color: var(--primary-color);
        cursor: pointer;
        text-align: center;
        transition: var(--transition);
    }

    .drop-area:hover {
        background-color: rgba(67, 97, 238, 0.05);
    }

    .drop-area.dragover {
        background: #e0f0ff;
    }

    #fileInput {
        display: none;
    }

    .result {
        margin-top: 20px;
        text-align: left;
        max-height: 300px;
        overflow-y: auto;
    }

    .url-result-item {
        background: #f4f4f4;
        padding: 10px;
        border-radius: 6px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        word-break: break-all;
    }

    .copy-btn {
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 4px;
        padding: 5px 10px;
        cursor: pointer;
        font-size: 14px;
    }

    .copy-btn:hover {
        background: var(--secondary-color);
    }

    @media (max-width: 768px) {
        .action-buttons {
            flex-direction: column;
        }
        
        .url-item {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .original-url {
            margin-bottom: 8px;
        }
    }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1><i class="fas fa-link"></i> URL Shortener</h1>
        <p>Shorten your long URLs quickly and easily</p>
    </div>

    <div class="card">
        <h2>Shorten Your URL</h2>
        <div class="form-group">
            <label for="longUrl">Enter URL to shorten</label>
            <input type="url" id="longUrl" class="form-control" placeholder="https://example.com/very-long-url">
        </div>
        
        <div class="drop-area" id="dropArea">
            <i class="fas fa-cloud-upload-alt"></i>
            <p>Drag & drop a .txt file here or click to upload</p>
        </div>
        <input type="file" id="fileInput" accept=".txt">
        
        <div class="divider"></div>
        
        <h3>Shorten URL</h3>
        <div class="action-buttons">
            <button class="btn-primary" onclick="shortenUrl()">
                <i class="fas fa-plus"></i> Create Now
            </button>
        </div>
    </div>

    <div class="card result-card" id="resultCard" style="display: none;">
        <h3>Your shortened URL:</h3>
        <div class="short-url" id="shortUrl"></div>
        <div class="action-buttons">
            <button class="btn-success" onclick="copyShortUrl()">
                <i class="fas fa-copy"></i> Copy URL
            </button>
            <button class="btn-secondary" onclick="resetForm()">
                <i class="fas fa-redo"></i> Shorten Another
            </button>
        </div>
    </div>

    <div class="result" id="result"></div>

    <div class="recent-urls">
        <h3>Recent Shortened URLs</h3>
        <ul class="url-list" id="recentUrls">
            <!-- Recent URLs will be added here dynamically -->
        </ul>
    </div>

    <div class="footer">
        <p>Â© 2023 Wander Tools - URL Shortener Tool</p>
        <p>Shorten your long URLs quickly and easily</p>
    </div>
</div>

<div class="notification" id="notification">
    <i class="fas fa-check-circle"></i> <span id="notification-text"></span>
</div>

<script>
// DOM Elements
const longUrlInput = document.getElementById('longUrl');
const dropArea = document.getElementById('dropArea');
const fileInput = document.getElementById('fileInput');
const resultCard = document.getElementById('resultCard');
const shortUrlElement = document.getElementById('shortUrl');
const recentUrlsList = document.getElementById('recentUrls');
const resultDiv = document.getElementById('result');
const notification = document.getElementById('notification');
const notificationText = document.getElementById('notification-text');

// Sample recent URLs data
const sampleRecentUrls = [
    { original: 'https://www.facebook.com/shahadot.wp', short: 'https://shrt.url/1kqnvf' },
    { original: 'https://www.example.com/very-long-url-path-that-needs-shortening', short: 'shrt.url/abc123' },
    { original: 'https://another-example.com/blog/post-title', short: 'shrt.url/mypost' },
    { original: 'https://long-domain-name.com/products/category/item', short: 'shrt.url/product1' }
];

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    loadRecentUrls();
    setupEventListeners();
});

function setupEventListeners() {
    // Drop area functionality
    dropArea.addEventListener('click', () => fileInput.click());

    dropArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropArea.classList.add('dragover');
    });

    dropArea.addEventListener('dragleave', () => {
        dropArea.classList.remove('dragover');
    });

    dropArea.addEventListener('drop', (e) => {
        e.preventDefault();
        dropArea.classList.remove('dragover');
        const file = e.dataTransfer.files[0];
        handleFile(file);
    });

    fileInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        handleFile(file);
    });
}

function handleFile(file) {
    if (!file || file.type !== "text/plain") {
        showNotification("Please upload a .txt file", false);
        return;
    }
    const reader = new FileReader();
    reader.onload = function(e) {
        // For this demo, we'll just show the content in the URL input
        // In a real implementation, you might process multiple URLs
        const content = e.target.result;
        const firstUrl = content.split('\n')[0].trim();
        if (firstUrl) {
            longUrlInput.value = firstUrl;
            showNotification('URL loaded from file');
        }
    };
    reader.readAsText(file);
}

function shortenUrl() {
    const longUrl = longUrlInput.value.trim();
    
    if (!longUrl) {
        showNotification('Please enter a URL to shorten', false);
        return;
    }
    
    // Validate URL format
    try {
        new URL(longUrl);
    } catch (e) {
        showNotification('Please enter a valid URL', false);
        return;
    }
    
    // Use the TinyURL API to shorten the URL
    shortenWithTinyURL(longUrl);
}

async function shortenWithTinyURL(longUrl) {
    // Show loading state
    showNotification('Shortening URL...');
    
    try {
        const response = await fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(longUrl)}`);
        const shortUrl = await response.text();

        // Display result
        shortUrlElement.textContent = shortUrl;
        shortUrlElement.setAttribute('data-url', shortUrl);
        resultCard.style.display = 'block';
        
        // Add to recent URLs
        addToRecentUrls(longUrl, shortUrl);
        
        // Also add to the result list
        addToResultList(longUrl, shortUrl);
        
        // Show success message
        showNotification('URL shortened successfully!');
    } catch (error) {
        console.error('Error shortening URL:', error);
        showNotification('Error shortening URL', false);
    }
}

function addToResultList(longUrl, shortUrl) {
    const urlItem = document.createElement("div");
    urlItem.className = "url-result-item";
    urlItem.innerHTML = `<a href="${shortUrl}" target="_blank">${shortUrl}</a>
                         <button class="copy-btn" onclick="copyUrl('${shortUrl}')">Copy</button>`;
    resultDiv.appendChild(urlItem);
}

function copyUrl(text) {
    // Create a temporary textarea element to copy from
    const textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.opacity = '0';
    document.body.appendChild(textArea);
    textArea.select();
    
    try {
        const successful = document.execCommand('copy');
        if (successful) {
            showNotification('URL copied to clipboard!');
        } else {
            showNotification('Failed to copy URL', false);
        }
    } catch (err) {
        console.error('Failed to copy: ', err);
        showNotification('Failed to copy URL', false);
    }
    
    document.body.removeChild(textArea);
}

function copyShortUrl() {
    const shortUrl = shortUrlElement.getAttribute('data-url');
    copyUrl(shortUrl);
}

function resetForm() {
    longUrlInput.value = '';
    resultCard.style.display = 'none';
    fileInput.value = '';
}

function loadRecentUrls() {
    // Clear existing list
    recentUrlsList.innerHTML = '';
    
    // Get recent URLs from localStorage or use sample data
    let recentUrls = [];
    try {
        const storedUrls = localStorage.getItem('wander-tools-recent-urls');
        if (storedUrls) {
            recentUrls = JSON.parse(storedUrls);
        }
    } catch (e) {
        console.log("Could not load recent URLs from storage");
    }
    
    // If no stored URLs, use sample data
    if (recentUrls.length === 0) {
        recentUrls = sampleRecentUrls;
    }
    
    // Add URLs to the list
    recentUrls.forEach(url => {
        const li = document.createElement('li');
        li.className = 'url-item';
        li.innerHTML = `
            <div class="original-url">${url.original}</div>
            <div class="shortened-url">${url.short}</div>
        `;
        recentUrlsList.appendChild(li);
    });
}

function addToRecentUrls(originalUrl, shortUrl) {
    // Get existing URLs
    let recentUrls = [];
    try {
        const storedUrls = localStorage.getItem('wander-tools-recent-urls');
        if (storedUrls) {
            recentUrls = JSON.parse(storedUrls);
        }
    } catch (e) {
        console.log("Could not load recent URLs from storage");
    }
    
    // Add new URL to the beginning of the list
    recentUrls.unshift({ original: originalUrl, short: shortUrl });
    
    // Keep only the last 10 URLs
    if (recentUrls.length > 10) {
        recentUrls = recentUrls.slice(0, 10);
    }
    
    // Save back to localStorage
    try {
        localStorage.setItem('wander-tools-recent-urls', JSON.stringify(recentUrls));
    } catch (e) {
        console.log("Could not save recent URLs to storage");
    }
    
    // Reload the recent URLs list
    loadRecentUrls();
}

function showNotification(message, isSuccess = true) {
    notificationText.textContent = message;
    
    if (isSuccess) {
        notification.style.backgroundColor = 'var(--success-color)';
        notification.classList.remove('error');
        notification.innerHTML = '<i class="fas fa-check-circle"></i> ' + '<span id="notification-text">' + message + '</span>';
    } else {
        notification.style.backgroundColor = '#ff3333';
        notification.classList.add('error');
        notification.innerHTML = '<i class="fas fa-exclamation-circle"></i> ' + '<span id="notification-text">' + message + '</span>';
    }
    
    // Update the text element reference
    const newNotificationText = document.getElementById('notification-text');
    
    notification.classList.add('show');
    
    setTimeout(() => {
        notification.classList.remove('show');
    }, 3000);
}
</script>
</body>
</html>
